{"version":3,"names":["_t","require","_jsesc","_methods","isAssignmentPattern","isIdentifier","lastRawIdentResult","_getRawIdentifier","node","name","token","tokenMap","find","tok","value","_originalCode","slice","start","end","Identifier","_buf","_map","_node$loc","sourceIdentifierName","loc","identifierName","word","ArgumentPlaceholder","RestElement","print","argument","ObjectExpression","props","properties","length","oldNoLineTerminatorAfterNode","enterDelimited","space","printList","shouldPrintTrailingComma","undefined","_noLineTerminatorAfterNode","rightBrace","ObjectMethod","printJoin","decorators","_methodHead","call","body","ObjectProperty","computed","key","left","shorthand","ArrayExpression","elems","elements","len","i","elem","tokenChar","RegExpLiteral","pattern","flags","BooleanLiteral","NullLiteral","NumericLiteral","raw","getPossibleRaw","opts","format","jsescOption","str","numbers","number","jsesc","minified","StringLiteral","val","BigIntLiteral","validTopicTokenSet","Set","TopicReference","topicToken","has","givenTopicTokenJSON","JSON","stringify","validTopics","Array","from","v","Error","join","PipelineTopicExpression","expression","PipelineBareFunction","callee","PipelinePrimaryTopicReference","VoidPattern"],"sources":["../../src/generators/types.ts"],"sourcesContent":["import type Printer from \"../printer.ts\";\nimport { isAssignmentPattern, isIdentifier } from \"@babel/types\";\nimport type * as t from \"@babel/types\";\nimport jsesc from \"jsesc\";\n// We inline this package\n// eslint-disable-next-line import/no-extraneous-dependencies\nimport * as charCodes from \"charcodes\";\nimport { _methodHead } from \"./methods.ts\";\n\nlet lastRawIdentResult: string = \"\";\nexport function _getRawIdentifier(this: Printer, node: t.Identifier) {\n  const { name } = node;\n  const token = this.tokenMap!.find(node, tok => tok.value === name);\n  if (token) {\n    lastRawIdentResult = this._originalCode!.slice(token.start, token.end);\n    return lastRawIdentResult;\n  }\n  return (lastRawIdentResult = node.name);\n}\n\nexport function Identifier(this: Printer, node: t.Identifier) {\n  if (this._buf._map) {\n    this.sourceIdentifierName(node.loc?.identifierName || node.name);\n  }\n\n  this.word(this.tokenMap ? lastRawIdentResult : node.name);\n}\n\nexport function ArgumentPlaceholder(this: Printer) {\n  this.token(\"?\");\n}\n\nexport function RestElement(this: Printer, node: t.RestElement) {\n  this.token(\"...\");\n  this.print(node.argument);\n}\n\nexport { RestElement as SpreadElement };\n\nexport function ObjectExpression(this: Printer, node: t.ObjectExpression) {\n  const props = node.properties;\n\n  this.token(\"{\");\n\n  if (props.length) {\n    const oldNoLineTerminatorAfterNode = this.enterDelimited();\n    this.space();\n    this.printList(\n      props,\n      this.shouldPrintTrailingComma(\"}\"),\n      true,\n      true,\n      undefined,\n      true,\n    );\n    this.space();\n    this._noLineTerminatorAfterNode = oldNoLineTerminatorAfterNode;\n  }\n\n  this.rightBrace(node);\n}\n\nexport { ObjectExpression as ObjectPattern };\n\nexport function ObjectMethod(this: Printer, node: t.ObjectMethod) {\n  this.printJoin(node.decorators);\n  _methodHead.call(this, node);\n  this.space();\n  this.print(node.body);\n}\n\nexport function ObjectProperty(this: Printer, node: t.ObjectProperty) {\n  this.printJoin(node.decorators);\n\n  if (node.computed) {\n    this.token(\"[\");\n    this.print(node.key);\n    this.token(\"]\");\n  } else {\n    // print `({ foo: foo = 5 } = {})` as `({ foo = 5 } = {});`\n    if (\n      isAssignmentPattern(node.value) &&\n      isIdentifier(node.key) &&\n      // @ts-expect-error todo(flow->ts) `.name` does not exist on some types in union\n      node.key.name === node.value.left.name\n    ) {\n      this.print(node.value);\n      return;\n    }\n\n    this.print(node.key);\n\n    // shorthand!\n    if (\n      node.shorthand &&\n      isIdentifier(node.key) &&\n      isIdentifier(node.value) &&\n      node.key.name === node.value.name\n    ) {\n      return;\n    }\n  }\n\n  this.token(\":\");\n  this.space();\n  this.print(node.value);\n}\n\nexport function ArrayExpression(this: Printer, node: t.ArrayExpression) {\n  const elems = node.elements;\n  const len = elems.length;\n\n  this.token(\"[\");\n\n  const oldNoLineTerminatorAfterNode = this.enterDelimited();\n\n  for (let i = 0; i < elems.length; i++) {\n    const elem = elems[i];\n    if (elem) {\n      if (i > 0) this.space();\n      this.print(elem, undefined, true);\n      if (i < len - 1 || this.shouldPrintTrailingComma(\"]\")) {\n        this.tokenChar(charCodes.comma, i);\n      }\n    } else {\n      // If the array expression ends with a hole, that hole\n      // will be ignored by the interpreter, but if it ends with\n      // two (or more) holes, we need to write out two (or more)\n      // commas so that the resulting code is interpreted with\n      // both (all) of the holes.\n      this.tokenChar(charCodes.comma, i);\n    }\n  }\n\n  this._noLineTerminatorAfterNode = oldNoLineTerminatorAfterNode;\n\n  this.token(\"]\");\n}\n\nexport { ArrayExpression as ArrayPattern };\n\nexport function RegExpLiteral(this: Printer, node: t.RegExpLiteral) {\n  this.word(`/${node.pattern}/${node.flags}`, false);\n}\n\nexport function BooleanLiteral(this: Printer, node: t.BooleanLiteral) {\n  this.word(node.value ? \"true\" : \"false\");\n}\n\nexport function NullLiteral(this: Printer) {\n  this.word(\"null\");\n}\n\nexport function NumericLiteral(this: Printer, node: t.NumericLiteral) {\n  const raw = this.getPossibleRaw(node);\n  const opts = this.format.jsescOption;\n  const value = node.value;\n  const str = value + \"\";\n  if (opts.numbers) {\n    this.number(jsesc(value, opts), value);\n  } else if (raw == null) {\n    this.number(str, value); // normalize\n  } else if (this.format.minified) {\n    this.number(raw.length < str.length ? raw : str, value);\n  } else {\n    this.number(raw, value);\n  }\n}\n\nexport function StringLiteral(this: Printer, node: t.StringLiteral) {\n  const raw = this.getPossibleRaw(node);\n  if (!this.format.minified && raw !== undefined) {\n    this.token(raw);\n    return;\n  }\n\n  const val = jsesc(node.value, this.format.jsescOption);\n\n  this.token(val);\n}\n\nexport function BigIntLiteral(this: Printer, node: t.BigIntLiteral) {\n  const raw = this.getPossibleRaw(node);\n  if (!this.format.minified && raw !== undefined) {\n    this.word(raw);\n    return;\n  }\n  this.word(node.value + \"n\");\n}\n\n// Hack pipe operator\nconst validTopicTokenSet = new Set<string | undefined>([\n  \"^^\",\n  \"@@\",\n  \"^\",\n  \"%\",\n  \"#\",\n]);\nexport function TopicReference(this: Printer) {\n  const { topicToken } = this.format;\n\n  if (validTopicTokenSet.has(topicToken)) {\n    this.token(topicToken!);\n  } else {\n    const givenTopicTokenJSON = JSON.stringify(topicToken);\n    const validTopics = Array.from(validTopicTokenSet, v => JSON.stringify(v));\n    throw new Error(\n      `The \"topicToken\" generator option must be one of ` +\n        `${validTopics.join(\", \")} (${givenTopicTokenJSON} received instead).`,\n    );\n  }\n}\n\n// Smart-mix pipe operator\nexport function PipelineTopicExpression(\n  this: Printer,\n  node: t.PipelineTopicExpression,\n) {\n  this.print(node.expression);\n}\n\nexport function PipelineBareFunction(\n  this: Printer,\n  node: t.PipelineBareFunction,\n) {\n  this.print(node.callee);\n}\n\nexport function PipelinePrimaryTopicReference(this: Printer) {\n  this.token(\"#\");\n}\n\n// discard binding\nexport function VoidPattern(this: Printer) {\n  this.word(\"void\");\n}\n"],"mappings":"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","ignoreList":[]}